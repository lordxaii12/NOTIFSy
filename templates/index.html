<!--CODE BY: RYRUBIO-->
{% extends "base.html" %}

    {% block title %}
        Home - FO-X NotiFS
    {% endblock %}

    {% block css %}
        <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/theme_settings.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/msgs.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/admin_tables.css') }}">
    {% endblock %}

    {% block content %}
        <div class="row g-0 p-0 m-0">
            <div class="col-auto">
            </div>
            <div class="col">
                <div class="container-fluid main_container">
                    <div class="setting_cont">
                        <img class="setting_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/info.svg') }}" 
                            alt="settings"
                            data-bs-toggle="modal" 
                            data-bs-target="#"
                            id="infoIcon"
                            style="cursor: pointer;">
                            
                        <img class="setting_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/themes.svg') }}" 
                            alt="settings"
                            data-bs-toggle="offcanvas" 
                            data-bs-target="#staticBackdrop"
                            id="settingsIcon"
                            style="cursor: pointer;">
                    </div>
                    <div class="row first_row {{user.theme.theme_bg}} {{user.theme.theme_font}}">
                        <div class="col">
                            <h2 class="welcome">Welcome <u>{{ user.full_name.split(' ')[0].title() }} {{ user.full_name.split(' ')[1].title() if '.' not in user.full_name.split(' ')[1] else '' }}</u></h2>
                            <h5 class="user-type">you are logged as {{user.role.role_name}} </h5>
                        </div>
                        <div class="col top-col ">
                            <h6>NOTES:</h6>
                        </div>
                        <div class="col top-col ">
                            <h6>SYSTEM NOTICE:</h6>
                        </div>
                    </div>
                    <div>
                        <h4 class="separator">{{ to_block_text("SERVICES") }}</h4>
                    </div>
                    <div class="row second_row">
                        <div class="col div_col {{user.theme.theme_bg}} {{user.theme.theme_font}}">
                            <div class="row service-row">
                                <div class="col service-col">
                                    <div class="service-content">
                                        <div class="service-info">
                                            <img class="setting_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/info.svg') }}" 
                                                alt="settings"
                                                data-bs-toggle="popover"
                                                data-bs-placement="top"
                                                data-bs-content="This service allows user to send a single message via sms or email, just click the image on the right.">
                                        </div>
                                        <div class="service-title">
                                            <h5>{{ to_block_text("Single") }} Contact</h5>
                                        </div>
                                    </div>
                                    <img class="card_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/send_single.svg') }}"
                                    alt="roles"
                                    data-bs-toggle="modal" 
                                    data-bs-target="#singleMsgModal">
                                </div>
                                <div class="col service-col">
                                    <div class="service-content">
                                        <div class="service-info">
                                            <img class="setting_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/info.svg') }}" 
                                                alt="settings"
                                                data-bs-toggle="popover"
                                                data-bs-placement="top"
                                                data-bs-content="This service allows user to send multiple messages via sms or email, just click the image on the right.">
                                        </div>
                                        <div class="service-title">
                                            <h5>{{ to_block_text("Multi") }} Contacts</h5>
                                        </div>
                                    </div>
                                    <img class="card_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/send_multiple.svg') }}" 
                                    alt="roles"
                                    data-bs-toggle="modal" 
                                    data-bs-target="#multiMsgModal">
                                </div>
                            </div>
                            <div class="row service-row">
                                <div class="col service-col">
                                    <div class="service-content">
                                        <div class="service-info">
                                            <img class="setting_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/info.svg') }}" 
                                                alt="settings"
                                                data-bs-toggle="popover"
                                                data-bs-placement="top"
                                                data-bs-content="This service allows user to send multiple messages via sms or email by uploading a file, just click the image on the right.">
                                        </div>
                                        <div class="service-title">
                                            <h5>{{ to_block_text("Upload") }} Contacts</h5>
                                        </div>
                                    </div>
                                    <img class="card_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/send_upload.svg') }}"
                                    alt="roles"
                                    data-bs-toggle="modal" 
                                    data-bs-target="#uploadMsgModal">
                                </div>
                                <div class="col service-col">
                                    <div class="service-content">
                                        <div class="service-info">
                                            <img class="setting_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/info.svg') }}" 
                                                alt="settings"
                                                data-bs-toggle="popover"
                                                data-bs-placement="top"
                                                data-bs-content="This space is allocated for new service.">
                                        </div>
                                        <div class="service-title">
                                            <h5>{{ to_block_text("Coming") }} Soon</h5>
                                        </div>
                                    </div>
                                    <!--<img class="card_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/send_single.svg') }}" alt="roles">-->
                                </div>
                            </div>
                        </div>
                        <div class="col div_col {{user.theme.theme_bg}} {{user.theme.theme_font}}">
                            <div class="row service-row">
                                <div class="col msg-col">
                                    <div class="service-content">
                                        <div class="service-info">
                                            <img class="setting_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/info.svg') }}" 
                                                alt="settings"
                                                data-bs-toggle="popover"
                                                data-bs-placement="top"
                                                data-bs-content="This space is allocated for new service.">
                                        </div>
                                        <div class="service-title">
                                            <h5>{{ to_block_text("sent") }} Messages</h5>
                                        </div>
                                    </div>
                                    <div class="msg-wrapper">
                                        {% if total_sent != 0 %}
                                            <p class="notifier">{{total_sent}}</p>
                                        {% endif %}
                                        <img class="msg_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/msg_sent.svg') }}" 
                                        alt="roles"
                                        data-bs-toggle="modal" 
                                        data-bs-target="#multiMsgModal">
                                    </div>
                                </div>
                                <div class="col msg-col">
                                    <div class="service-content">
                                        <div class="service-info">
                                            <img class="setting_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/info.svg') }}" 
                                                alt="settings"
                                                data-bs-toggle="popover"
                                                data-bs-placement="top"
                                                data-bs-content="This space is allocated for new service.">
                                        </div>
                                        <div class="service-title">
                                            <h5>Un{{ to_block_text("sent") }} Messages</h5>
                                        </div>
                                    </div>
                                    <div class="msg-wrapper">
                                        {% if total_unsent != 0 %}
                                            <p class="notifier">{{total_unsent}}</p>
                                        {% endif %}
                                        <img class="msg_icon" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/msg_unsent.svg') }}" 
                                        alt="roles"
                                        data-bs-toggle="modal" 
                                        data-bs-target="#multiMsgModal">
                                    </div>
                                </div>
                            </div>
                            <div class="row service-row">
                                <div class="col table-col">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th class="equal-header">ID</th>
                                                <th class="equal-header">Type</th>
                                                <th class="equal-header">Content</th>
                                                <th class="equal-header">Date</th>
                                                {% if user.is_authenticated and user.role_id in [1,3] %}
                                                    <th class="action-header">Actions</th>
                                                {% endif %}
                                            </tr>
                                        </thead>
                                        <tbody id="tableBody">
                                            {% for messages in msg_data%}
                                            <tr>
                                                <td class="equal-column">{{messages.msg_tracker }}</td>
                                                <td class="equal-column">{{messages.msg_type}}</td>
                                                <td class="equal-column">{{messages.msg_content}}</td>
                                                <td class="equal-column">{{messages.sent_on}}</td>
                                                {% if user.is_authenticated and user.role_id in [1,3] %}
                                                    <td class="action-column">
                                                        <button class="msg-btn btn p-0 m-0 " data-log-id="{{ messages.msg_id }}">
                                                            <img class="table_icons" src="{{ url_for('static', filename='images/'+user.theme.theme_icon+'/global/delete_icon.svg') }}" alt="delete" />
                                                        </button>
                                                    </td>
                                                {% endif %}
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% include "home_modals/theme_offcanvas.html" %}
        {% include "home_modals/msg_modal.html" %}
        {% include "home_modals/directory.html" %}

        {% block scripts %}
            <script src="{{ url_for('static', filename='js/messages.js') }}"></script>
        {% endblock %}

    {% endblock %}


