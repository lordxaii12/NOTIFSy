<style>
    /* Container to limit table height */
    .table-container {
        width: 100%;
        height: 150px; /* Fixed height */
        
        border: 1px solid #ccc;
        position: relative;
    }

    /* Ensure table takes full width */
    #data-table {
        width: 100%;
        border-collapse: collapse;
    }

    /* Fix table header */
    #data-table thead {
        position: sticky;
        top: 0;
        background: white;
        z-index: 2;
    }

    /* Table cells */
    #data-table th, #data-table td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    /* Set font size */
    #data-table {
        font-size: 12px; /* Adjust as needed */
    }

    /* Make tbody scrollable */
    .table-container tbody {
        display: block;
        max-height: 150px; /* Ensure it fits inside the container */
        overflow-y: auto;
        width: 100%;
    }

    /* Ensure table columns align properly */
    .table-container thead,
    .table-container tbody tr {
        display: table;
        width: 100%;
        table-layout: fixed;
    }
</style>





<div class="form-row">
                        
    <div class="form-group" id="table-container" style="display: none;">
        <label for="mlist">Recipient List:</label>
        <div class="table-container">
            <table  class="table table-striped table-hover" id="data-table" style="height: 200px;">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Mobile Number</th>
                        <th>Email</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
</div>




<!--<script>
    function updateTable() {
        var textarea = document.getElementById("mlist");
        var tableBody = document.querySelector("#data-table tbody");
        var tableContainer = document.getElementById("table-container");

        // Clear table before updating
        tableBody.innerHTML = "";

        if (textarea && textarea.value.trim() !== "") {
            var lines = textarea.value.trim().split("\n"); // Split by lines
            lines.forEach(function (line) {
                var parts = line.split(":"); // Split Name, Mobile, Email
                if (parts.length === 3) {
                    var row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${parts[0]}</td>
                        <td>${parts[1]}</td>
                        <td>${parts[2]}</td>
                    `;
                    tableBody.appendChild(row);
                }
            });

            // Show the div when there is content
            tableContainer.style.display = "block";
        } else {
            // Hide the div if empty
            tableContainer.style.display = "none";
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        var textarea = document.getElementById("mlist");

        if (textarea) {
            textarea.addEventListener("input", updateTable);
            textarea.addEventListener("change", updateTable);
            // Polling to detect dynamic updates every second
            setInterval(updateTable, 1000);
            updateTable(); // Initial check
            const observer = new MutationObserver(updateTable);
            observer.observe(textarea, { childList: true, subtree: true, characterData: true });
        }
    });
</script>-->

<script>
    function updateTable() {
        var textarea = document.getElementById("mlist");
        var tableBody = document.querySelector("#data-table tbody");
        var tableContainer = document.getElementById("table-container");

        // Clear table before updating
        tableBody.innerHTML = "";

        if (textarea && textarea.value.trim() !== "") {
            var lines = textarea.value.trim().split("\n"); // Split by lines
            lines.forEach(function (line) {
                var parts = line.split(":"); // Split Name, Mobile, Email
                if (parts.length === 3) {
                    var row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${parts[0]}</td>
                        <td>${parts[1]}</td>
                        <td>${parts[2]}</td>
                    `;
                    tableBody.appendChild(row);
                }
            });

            // Show the div when there is content
            tableContainer.style.display = "block";
        } else {
            // Hide the div if empty
            tableContainer.style.display = "none";
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        var textarea = document.getElementById("mlist");

        if (textarea) {
            textarea.addEventListener("input", updateTable);
            textarea.addEventListener("change", updateTable);

            // Observer to detect changes in mlist (for dynamic updates)
            const observer = new MutationObserver(() => updateTable());
            observer.observe(textarea, { attributes: true, childList: true, characterData: true, subtree: true });

            updateTable(); // Initial check
        }
    });
</script>
